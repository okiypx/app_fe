<!DOCTYPE html>

<html class="no-js css-menubar">

<head>
    <!-- Meta -->

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta name="description" content="bootstrap admin template">
    <meta name="author" content="">
    <title>Ximax Manager</title>
    <link rel="apple-touch-icon" href="/wallet/resources/remark/assets/images/apple-touch-icon.png">
    <link rel="shortcut icon" href="/wallet/resources/img/favicon.png">
    <link rel="stylesheet" href="/wallet/resources/compiled/compiled_meta.css?v=2018081601">
    <script src="/wallet/resources/compiled/compiled_meta.js?v=2018081601"></script>
    <script>
        Breakpoints();
    </script>
</head>

<body class="dashboard">
    <nav class="site-navbar navbar navbar-default navbar-fixed-top navbar-mega bg-grey-600" role="navigation">


        <div class="navbar-header">
            <button type="button" class="navbar-toggle hamburger hamburger-close navbar-toggle-left hided" data-toggle="menubar">
        <span class="sr-only">Toggle navigation</span>
        <span class="hamburger-bar"></span>
    </button>
            <button type="button" class="navbar-toggle collapsed" data-target="#site-navbar-collapse" data-toggle="collapse">
        <i class="icon wb-more-horizontal" aria-hidden="true"></i>
    </button>
            <div class="navbar-brand navbar-brand-center site-gridmenu-toggle" data-toggle="gridmenu">
                <img class="navbar-brand-logo" src="/wallet/resources/img/logo25.png" title="logo">
                <div class="navbar-brand-text" style="text-overflow:ellipsis; overflow:hidden;float: right;"></div>
            </div>
        </div>
        <div class="navbar-container container-fluid">
            <div class="collapse navbar-collapse navbar-collapse-toolbar" id="site-navbar-collapse">
                <ul class="nav navbar-toolbar">
                    <li class="hidden-float" id="toggleMenubar">
                        <a data-toggle="menubar" href="#" role="button">
                    <i class="icon hamburger hamburger-arrow-left">
                        <span class="sr-only">Toggle menubar</span>
                        <span class="hamburger-bar"></span>
                    </i>
                </a>
                    </li>
                </ul>
                <ul class="nav navbar-toolbar navbar-right navbar-toolbar-right">
                    <li id="headerOperatorPointRoot">
                        <div class="input-group input-group-icon" style="padding-top:20px; width:150px;" align="right">
                            <span class="input-group-addon" style="height: 12px; padding: 3px 7px 3px 7px;"><span class="icon fa-money" style="" aria-hidden="true"></span></span>
                            <input id="txtHeaderOperatorPoint" style="height: 25px; text-align: right; padding-right:4px; padding-left:4px;" class="form-control" />
                        </div>
                    </li>
                    <li>
                        <a class="icon wb-reload" aria-hidden="true" href="#" role="button" onclick="g_tilesHeaderModalObj.onClickRefreshOperatorPoint()"></a>
                    </li>
                    <li id="toggleFullscreen">
                        <a class="icon icon-fullscreen" data-toggle="fullscreen" href="#" role="button"><span class="sr-only">Toggle fullscreen</span></a>
                    </li>
                    <li class="dropdown">
                        <a style="width:44px;padding-left:8px" class="navbar-avatar dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false" data-animation="scale-up" role="button">
                  <span class="avatar avatar-online">
                    <img src="/wallet/resources/img/Avatar-blank.jpg" alt="...">
                    <i></i>
                  </span>
                </a>
                        <ul class="dropdown-menu" role="menu">

                            <li role="presentation">
                                <a href="/wallet/logout" role="menuitem"><i class="icon wb-power" aria-hidden="true"></i>Logout</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
        <script>
            var g_tilesHeaderClickManager = {
                isEnabled: true,
                enable: function() {
                    this.isEnabled = true;
                },
                disable: function() {
                    this.isEnabled = false;
                },
                printState: function() {
                    console.log('g_tilesHeaderClickManager.isEnabled : ' + this.isEnabled);
                },
                clone: function() {
                    var copy = g_tilesHeaderClickManager.constructor();
                    for (var attr in g_tilesHeaderClickManager) {
                        if (g_tilesHeaderClickManager.hasOwnProperty(attr)) {
                            copy[attr] = this[attr];
                        }
                    }
                    return copy;
                }
            };
            var g_tilesHeaderModalObj = {
                clickManager: {
                    isEnabled: true,
                    enable: function() {
                        this.isEnabled = true;
                    },
                    disable: function() {
                        this.isEnabled = false;
                    }
                },
                intervalId: null,
                onClickRefreshOperatorPoint: function() {
                    console.log('refresh operator point');
                    window.location.reload(true);
                },
                requestCurrentOperatorPoint: function() {
                    $("#txtHeaderOperatorPoint").val('');

                    var param = '';
                    var targetUrl = "/wallet/api/managerApi/getOperatorPoint";
                    $.ajax({
                        accepts: {
                            text: "application/json"
                        },
                        type: 'POST',
                        url: targetUrl,
                        data: param,
                        success: function(data) {
                            if (data.returnCode == 0) {
                                var operatorPoint = data.operatorPoint;
                                if (data.operatorPoint) {
                                    try {
                                        $("#txtHeaderOperatorPoint").val(mcjsUtils.getFormattedPointString(operatorPoint.toFixed(2), 2));
                                    } catch (e) {
                                        $("#txtHeaderOperatorPoint").val(data.operatorPoint);
                                    }
                                } else
                                    $("#txtHeaderOperatorPoint").val(data.operatorPoint);
                            } else {
                                console.log(data);
                                if (g_tilesHeaderModalObj.intervalId) {
                                    clearInterval(g_tilesHeaderModalObj.intervalId);
                                }
                                $("#txtHeaderOperatorPoint").val('Error');
                            }
                        },
                        error: function(e) {
                            console.log(e);
                            if (g_tilesHeaderModalObj.intervalId) {
                                clearInterval(g_tilesHeaderModalObj.intervalId);
                            }
                        }
                    });
                },
                requestUnresolvedTransfer: function() {
                    var param = '';
                    var targetUrl = "/wallet/api/managerApi/getUnresolvedTransferCount";
                    $.ajax({
                        accepts: {
                            text: "application/json"
                        },
                        type: 'POST',
                        url: targetUrl,
                        data: param,
                        success: function(data) {
                            if (data.returnCode == 0) {
                                try {
                                    if (data.count == 0 || data.count == '0')
                                        $("#txtMenuUnresolvedTransferCount")[0].innerHTML = '';
                                    else
                                        $("#txtMenuUnresolvedTransferCount")[0].innerHTML = data.count;
                                } catch (e) {
                                    console.log(e);
                                    console.log(data);
                                }
                            } else {
                                console.log(data);
                            }
                        },
                        error: function(e) {
                            console.log(e);
                        }
                    });
                }
            };
            $(document).ready(function() {
                g_tilesHeaderModalObj.requestCurrentOperatorPoint();
                g_tilesHeaderModalObj.requestUnresolvedTransfer();
            });
        </script>
    </nav>
    <!-- Menu -->





    <div class="site-menubar" id="siteMenuBar">
        <div class="site-menubar-body">
            <div>
                <div>
                    <ul class="site-menu">
                        <!-- Start General -->
                        <li class="site-menu-category">General</li>
                        <li class="site-menu-item" id="menu-dashBoard">
                            <a class="animsition-link" href="/wallet/dashboard" data-slug="angular">
                            <i class="site-menu-icon wb-dashboard" aria-hidden="true"></i>
                            <span class="site-menu-title">Dashboard</span>
                        </a>
                        </li>

                        <li class="site-menu-item" id="menu-operator-information">
                            <a class="animsition-link" href="/wallet/operator/info" data-slug="angular">
                            <i class="site-menu-icon wb-info" aria-hidden="true"></i>
                            <span class="site-menu-title">Information</span>
                        </a>
                        </li>
                        <!-- End General-->

                        <!-- Start Management -->
                        <li class="site-menu-category">Management</li>


                        <li class="site-menu-item" id="menu-operator">
                            <a class="animsition-link" href="/wallet/management/operator" data-slug="angular">
                                <i class="site-menu-icon wb-user" aria-hidden="true"></i>
                                <span class="site-menu-title">Operator</span>
                            </a>
                        </li>
                        <li class="site-menu-item" id="menu-member">
                            <a class="animsition-link" href="/wallet/management/member" data-slug="angular">
                                <i class="site-menu-icon wb-users" aria-hidden="true"></i>
                                <span class="site-menu-title">Member</span>
                            </a>
                        </li>
                        <li class="site-menu-item" id="menu-game">
                            <a class="animsition-link" href="/wallet/management/operatorGames" data-slug="angular">
                                <i class="site-menu-icon fa-gamepad" aria-hidden="true"></i>
                                <span class="site-menu-title">Game</span>
                                
                            </a>
                        </li>


                        <li class="site-menu-item">
                            <a class="animsition-link" href="/wallet/management/unresolvedTransfer" data-slug="angular">
                            <i class="site-menu-icon wb-alert-circle" aria-hidden="true"></i>
                            <span class="site-menu-title">Unresolved Transfer</span>
                            <div class="site-menu-badge">
                                <span class="badge badge-success" id="txtMenuUnresolvedTransferCount"></span>
                            </div>
                        </a>
                        </li>
                        <!-- End Management -->

                        <!-- Start Report -->
                        <li class="site-menu-category">Report</li>
                        <li class="site-menu-item" id="menu-reportMonthly">
                            <a class="animsition-link" href="/wallet/report/transaction/monthly" data-slug="angular">
                            <i class="site-menu-icon wb-calendar" aria-hidden="true"></i>
                            <span class="site-menu-title">Monthly</span>
                        </a>
                        </li>
                        <li class="site-menu-item" id="menu-reportDaily">
                            <a class="animsition-link" href="/wallet/report/transaction/daily" data-slug="angular">
                            <i class="site-menu-icon wb-calendar" aria-hidden="true"></i>
                            <span class="site-menu-title">Daily</span>
                        </a>
                        </li>
                        <!--
                    <li class="site-menu-item" id="menu-reportHourly">
                        <a class="animsition-link" href="/wallet/report/transaction/hourly" data-slug="angular">
                            <i class="site-menu-icon wb-calendar" aria-hidden="true"></i>
                            <span class="site-menu-title">Hourly</span>
                        </a>
                    </li>
                    -->
                        <li class="site-menu-item" id="menu-reportPerOperator">
                            <a class="animsition-link" href="/wallet/report/transaction/byOperator" data-slug="angular">
                            <i class="site-menu-icon wb-user" aria-hidden="true"></i>
                            <span class="site-menu-title">by Operator</span>
                        </a>
                        </li>
                        <li class="site-menu-item" id="menu-reportPerGame">
                            <a class="animsition-link" href="/wallet/report/transaction/byThirdParty" data-slug="angular">
                            <i class="site-menu-icon fa-gamepad" aria-hidden="true"></i>
                            <span class="site-menu-title">by ThirdParty</span>
                        </a>
                        </li>
                        <!-- End Report -->

                        <!-- Start Search -->
                        <li class="site-menu-category">Search</li>
                        <li class="site-menu-item" id="menu-popularGame">
                            <a class="animsition-link" href="/wallet/ranking/byHit" data-slug="angular">
                            <i class="site-menu-icon fa-gamepad" aria-hidden="true"></i>
                            <span class="site-menu-title">Game Hit Ranking</span>
                        </a>
                        </li>
                        <li class="site-menu-item" id="menu-operatortransaction">
                            <a class="animsition-link" href="/wallet/report/operatorTransaction" data-slug="angular">
                            <i class="site-menu-icon fa-credit-card" aria-hidden="true"></i>
                            <span class="site-menu-title">Operator Transaction</span>
                        </a>
                        </li>
                        <li class="site-menu-item" id="menu-transactionSearch">
                            <a class="animsition-link" href="/wallet/report/transaction/search" data-slug="angular">
                            <i class="site-menu-icon fa-credit-card" aria-hidden="true"></i>
                            <span class="site-menu-title">Transaction Search</span>
                        </a>
                        </li>
                        <!--
                    <li class="site-menu-item"id="menu-transactionRealTime">
                        <a class="animsition-link"href="/wallet/report/transaction/summary"data-slug="angular">
                            <i class="site-menu-iconfa-credit-card"aria-hidden="true"></i>
                        <span class="site-menu-title">TransactionSummary</span>
                        </a>
                    </li>
                    -->
                        <li class="site-menu-item" id="menu-gameHistory">
                            <a class="animsition-link" href="/wallet/report/gameHistory" data-slug="angular">
                            <i class="site-menu-icon wb-clipboard" aria-hidden="true"></i>
                            <span class="site-menu-title">Game History</span>
                        </a>
                        </li>
                        <!-- End Search -->



                        <!-- API Test Menu -->
                        <li class="site-menu-category">API</li>

                        <li class="site-menu-item" id="menu-apiTest">
                            <a class="animsition-link" href="/wallet/apiManager/test" data-slug="angular">
                                <i class="site-menu-icon wb-hammer" aria-hidden="true"></i>
                                <span class="site-menu-title">API Test</span>
                            </a>
                        </li>


                        <!-- End API Test Menu -->


                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- Page -->
    <div class="page">
        <div class="loading" id="mc_tiles_body_loading" style="display:none">
            <div style="height:500px;width:100%;display:table;">
                <div style="display:table-cell;vertical-align: middle;">
                    <div class="spinner">
                        <div class="bounce1"></div>
                        <div class="bounce2"></div>
                        <div class="bounce3"></div>
                    </div>
                </div>
            </div>
        </div>


        <link rel="stylesheet" href="/wallet/resources/lib/ax5ui-grid/dist/ax5grid.css">

        <div class="page-content container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <nav class="navbar navbar-default" role="navigation">

                        <div class="container-fluid">
                            <div class="navbar-header">
                                <button type="button" class="navbar-toggle collapsed" data-target="#example-navbar-search" data-toggle="collapse">
                            <span class="sr-only">Toggle Search</span>
                            <i class="icon wb-search" aria-hidden="true"></i>
                        </button>
                                <a class="navbar-brand">Operator</a>
                            </div>
                            <div class="collapse navbar-search navbar-left" id="example-navbar-search">
                                <form class="navbar-form" role="search" id="searchBox">
                                    <div class="col-lg-12 margin-bottom-5">
                                        <div class="form-group">
                                            <select class="form-control" id="typeSearchOption">
                                        <option value="">- Type -</option>
                                        
                                            <option value="0">ADMIN</option>
                                        
                                            <option value="1">MASTER</option>
                                        
                                            <option value="2">OPERATOR</option>
                                        
                                            <option value="3">AGENT</option>
                                        
                                    </select>
                                        </div>
                                        <div class="form-group">
                                            <select class="form-control" id="stateSearchOption">
                                        <option value="">- State -</option>
                                        
                                            <option value="0">USE</option>
                                        
                                            <option value="1">BLOCK</option>
                                        
                                            <option value="2">ASK</option>
                                        
                                            <option value="3">HOLD</option>
                                        
                                    </select>
                                        </div>
                                        <div class="form-group">
                                            <select class="form-control" id="select_op_currency">
                                        <option value="">- Currency -</option>
                                        
                                            <option value="ERR">ERR</option>
                                        
                                            <option value="USD">USD</option>
                                        
                                            <option value="KRW">KRW</option>
                                        
                                            <option value="JPY">JPY</option>
                                        
                                            <option value="CNY">CNY</option>
                                        
                                            <option value="MYR">MYR</option>
                                        
                                    </select>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-search">
                                                <button type="button" class="input-search-btn" onclick="fnObj.grid.firstGridSearch();"><i class="icon wb-search"
                                                                                           aria-hidden="true"></i>
                                        </button>
                                                <input type="text" class="form-control" id="searchInput" style="width:160px;" placeholder="Search...">
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </nav>
                </div>

                <div class="col-lg-12">
                    <!-- Panel -->
                    <div class="panel">
                        <div class="panel-heading">
                            <h3 class="panel-title"> &nbsp; </h3>

                            <div class="page-header-actions">
                                <button type="button" class="btn btn-sm btn-icon btn-primary btn-outline " data-toggle="tooltip" onclick="fnObj.grid.onClickAddRootOperator();">
                            Add operator on Top
                        </button>
                                <select class="btn btn-default dropdown-toggle" id="gridPagingSize">
                            <option value="20">Size</option>
                            <option value="20">20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                            <option value="200">200</option>
                        </select>
                            </div>
                        </div>
                        <div class="panel-body">
                            <div data-ax5grid="AXGridTarget_first" data-ax5grid-config="{}" style="height: 100%;"></div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <script src="/wallet/resources/lib/ax5core/dist/ax5core.min.js"></script>
        <script src="/wallet/resources/lib/ax5ui-grid/dist/ax5grid.min.js"></script>
        <script>
            $(document).ready(function() {

                if (mcjsUtils.isMobileDevice() == true) {
                    $('#gridPagingSize').hide();
                }

                $("#select_op_currency option[value='ERR']").remove();

                $('#searchBox').submit(function() {
                    fnObj.grid.firstGridSearch();
                    return false;
                });

                var opType = '';
                if (opType == 'ADMIN' || ((opType == 'MASTER' || opType == 'OPERATOR') && parseInt('') < parseInt('5'))) {
                    $('#btn_add_top_operator').show();
                }

                $('#gridPagingSize').change(function() {
                    var currentPagingSize = $(this).val();
                    if (currentPagingSize == 20)
                        fnObj.grid.gridFirst.setHeight(635);
                    else if (currentPagingSize == 50)
                        fnObj.grid.gridFirst.setHeight(1480);
                    else if (currentPagingSize == 100)
                        fnObj.grid.gridFirst.setHeight(2880);
                    else if (currentPagingSize == 200)
                        fnObj.grid.gridFirst.setHeight(5680);
                    fnObj.grid.firstGridSearch();
                });

            });

            var fnObj = {
                init: function() {
                    fnObj.grid.init();
                    $("#gridPagingSize").val(200);
                    fnObj.grid.gridFirst.setHeight(5680);
                    fnObj.grid.firstGridSearch();
                },
                data: {
                    convertTreeViewString: function(input, opType) {
                        var i;
                        var emptyLength = 0;
                        for (i = 0; i < input.length; i++) {
                            if (input[i] == ' ') {
                                emptyLength++;
                            }
                        }
                        var targetString = '';
                        var replaceString = '';
                        for (i = 0; i < emptyLength; i++) {
                            targetString += ' ';
                            replaceString += '&nbsp;';
                        }
                        for (i = 1; i < emptyLength; i++) {
                            replaceString += '&nbsp;&nbsp;&nbsp;';
                        }

                        if (opType == 'ADMIN')
                            return 'S';
                        if (emptyLength == 0)
                            return opType[0];

                        return replaceString + '<img src="/wallet/resources/img/tree_line.png">' + opType[0];
                    }
                },
                page: {
                    moveRegisterPage: function() {
                        var url = "/wallet/management/operator/register";
                        $(location).attr('href', url);
                    }
                },
                grid: {
                    dialogObjectRef: null,
                    dialogButtonRef: null,
                    init: function() {
                        ax5.ui.grid.tmpl.page_status = function() {
                            return '<span>  {{#totalElements}}  Total {{.}}{{/totalElements}}</span>';
                        };
                        this.firstGridInit();
                    },
                    getPagingItemSize: function(gridOrder) {
                        switch (gridOrder) {
                            case 1:
                                if (mcjsUtils.isMobileDevice() == true) return 8;
                                return $('#gridPagingSize').val();
                                break;
                        }
                    },
                    getGridHeight: function(gridOrder) {
                        switch (gridOrder) {
                            case 1:
                                if (mcjsUtils.isMobileDevice() == true) return 300;
                                else return 635;
                                break;
                        }
                    },
                    gridFirst: new ax5.ui.grid(),
                    firstGridInit: function() {
                        this.configForGridFirst = {
                            target: $('[data-ax5grid="AXGridTarget_first"]'),
                            sortable: false,
                            virtualScrollX: false,
                            virtualScrollY: false,
                            multipleSelect: false,
                            height: 635,
                            columns: [{
                                    key: "btnShowInfo",
                                    label: "Info",
                                    width: 34,
                                    align: "center",
                                    formatter: function() {
                                        return '<a class="icon wb-info" aria-hidden="true"></a>';
                                    }
                                },
                                {
                                    key: "treeItem",
                                    label: "Tree",
                                    width: 80,
                                    align: "left",
                                    formatter: function() {
                                        return fnObj.data.convertTreeViewString(this.item.treeItem, this.item.opType);
                                    }
                                },
                                {
                                    key: "opId",
                                    label: "ID",
                                    align: "left",
                                    width: 90
                                },
                                {
                                    key: "opPoint",
                                    label: "Current Point",
                                    width: 120,
                                    align: "right",
                                    formatter: function() {
                                        return mcjsUtils.getFormattedPointString(this.item.opPoint, 2);
                                    }
                                },
                                {
                                    key: "btnAddPoint",
                                    label: "Point",
                                    width: 85,
                                    align: "center",
                                    formatter: function() {
                                        if (this.item.opState == 'USE' && this.item.opType != 'ADMIN')
                                            return '<button type="button" style="height:22px;width:35px" onclick="fnObj.grid.onClickAddPoint(' + this.dindex + ');"><a class="icon wb-plus" aria-hidden="true"></a></button> <button type="button" style="height:22px;width:35px" onclick="fnObj.grid.onClickSubtractPoint(' + this.dindex + ');"><a class="icon wb-minus" aria-hidden="true"></a></button>';
                                        else
                                            return '';
                                    }
                                },
                                {
                                    key: "opPrepaidOn",
                                    label: "Prepaid",
                                    width: 55,
                                    align: "center"
                                },
                                {
                                    key: "opRetryTransferOn",
                                    label: "RetryTransfer",
                                    width: 90,
                                    align: "center"
                                },
                                {
                                    key: "btnAddChildOperator",
                                    label: "Add Child",
                                    width: 65,
                                    align: "center",
                                    formatter: function() {
                                        if (this.item.opState == 'USE' && (this.item.opType == 'MASTER' || this.item.opType == 'OPERATOR') && parseInt(this.item.opLevel) < parseInt('5'))
                                            return '<a class="icon wb-user-add" aria-hidden="true"></a>';
                                        else
                                            return '';
                                    }
                                },
                                {
                                    key: "btnShowOperatorGames",
                                    label: "Games",
                                    width: 50,
                                    align: "center",
                                    formatter: function() {
                                        return '<a class="icon fa-gamepad" aria-hidden="true"></a>';
                                    }
                                },
                                {
                                    key: "btnShowOperatorTransactions",
                                    label: "Transactions",
                                    width: 80,
                                    align: "center",
                                    formatter: function() {
                                        return '<a class="icon wb-payment" aria-hidden="true"></a>';
                                    }
                                },
                                {
                                    key: "opUserPrefix",
                                    label: "UserPrefix",
                                    width: 70,
                                    align: "left"
                                },
                                {
                                    key: "opType",
                                    label: "Type",
                                    width: 80,
                                    align: "left"
                                },
                                {
                                    key: "opState",
                                    label: "State",
                                    width: 55,
                                    align: "center",
                                    formatter: function() {
                                        if (this.item.opState == 'ASK' && parseInt('') <= 1)
                                            return '<button type="button" name="btnEnableOperator" onclick="fnObj.grid.onClickEnableOperator(' + this.item.opIdx + ');">Accept</button>';
                                        else
                                            return this.item.opState;
                                    }
                                },
                                {
                                    key: "opCurrency",
                                    label: "Cur",
                                    width: 40,
                                    align: "center"
                                }
                            ],
                            header: {
                                align: "center",
                                columnHeight: 28
                            },
                            body: {
                                columnHeight: 28,
                                onClick: function() {
                                    this.self.select(this.dindex);
                                    fnObj.grid.onClickGridCell(1, this.self.headerColGroup[this.colIndex].label, this.item, this.dindex);
                                }
                            },
                            page: {
                                navigationItemCount: 3,
                                height: 30,
                                display: true,
                                firstIcon: '<i class="fa fa-step-backward" aria-hidden="true"></i>',
                                prevIcon: '<i class="fa fa-caret-left" aria-hidden="true"></i>',
                                nextIcon: '<i class="fa fa-caret-right" aria-hidden="true"></i>',
                                lastIcon: '<i class="fa fa-step-forward" aria-hidden="true"></i>',
                                onChange: function() {
                                    fnObj.grid.firstGridSearch(this.page.selectPage);
                                }
                            }
                        };

                        fnObj.grid.configForGridFirst.height = fnObj.grid.getGridHeight(1);
                        if (mcjsUtils.isMobileDevice() == false)
                            this.configForGridFirst.page.navigationItemCount = 30;
                        this.gridFirst.setConfig(this.configForGridFirst);
                    },
                    onClickGridCell: function(gridOrder, headerName, item, dindex) {
                        switch (gridOrder) {
                            case 1:
                                switch (headerName) {
                                    case 'Info':
                                        $(location).attr('href', '/wallet/management/operator/' + item.opIdx);
                                        break;
                                    case 'Transactions':
                                        window.open('/wallet/report/operatorTransaction?targetOpId=' + item.opId);
                                        break;
                                    case 'Games':
                                        $(location).attr('href', '/wallet/management/operator/' + item.opIdx);
                                        break;
                                    case 'Add Child':
                                        if (item.opState == 'USE' && (item.opType == 'MASTER' || item.opType == 'OPERATOR') && parseInt(item.opLevel) < parseInt('5'))
                                            fnObj.grid.onClickAddChildOperator(item);
                                        break;
                                }
                                break;
                        }
                    },
                    firstGridSearch: function(selectedPage) {
                        if (selectedPage) selectedPage = Number(selectedPage) + 1;
                        else selectedPage = 1;
                        var requestParam = "pageNo=" + selectedPage + "&pageSize=" + this.getPagingItemSize(1);

                        var queryString = $('#searchInput').val();
                        var typeSearch = $('#typeSearchOption').val();
                        var stateSearch = $('#stateSearchOption').val();
                        var opCurrency = $('#select_op_currency').val();

                        requestParam = requestParam + "&search=" + queryString + "&queryColumn=all&opType=" + typeSearch + "&opState=" + stateSearch;
                        if (opCurrency) {
                            requestParam += "&opCurrency=" + opCurrency;
                        }
                        var reqUrl = "/wallet/management/operator";

                        // tree view : 받은데이터가 0인데 'top' 으로 데이터가 변경됨
                        //                var i;
                        //                for (i = 0; i < res.list.length; i++) {
                        //                    if (res.list[i].opParentIdx == 0)
                        //                        res.list[i].opParentIdx = '';
                        //                }

                        mcjsUtils.showTilesBodyLoading(true);
                        mcjsUtils.requestForAx5ui('POST', 'application/json', true, reqUrl, requestParam, fnObj.grid.gridFirst);
                    },
                    onClickEnableOperator: function(targetOpIdx) {
                        swal({
                                title: "Enable Operator",
                                text: "This operator will be enabled",
                                type: "warning",
                                showCancelButton: true,
                                confirmButtonColor: '#DD6B55',
                                confirmButtonText: 'Accept',
                                closeOnConfirm: true,
                                cancelButtonText: 'No'
                                //closeOnCancel: false
                            },
                            function() {
                                $.ajax({
                                    type: "GET",
                                    url: "/wallet/management/operator/enableOperator/" + targetOpIdx,
                                    dataType: 'json',
                                    success: function(e) {
                                        if (e.returnCode == 0) {
                                            fnObj.grid.firstGridSearch();
                                        } else {
                                            console.log(e);

                                            var errorDialog = new BootstrapDialog();
                                            errorDialog.setTitle('<h4>Error - ' + e.returnCode + '</h4>');
                                            errorDialog.setMessage(e.description);
                                            errorDialog.setType(BootstrapDialog.TYPE_DANGER);
                                            errorDialog.open();
                                        }
                                    },
                                    error: function(xhr) {
                                        console.log(xhr);
                                    }
                                });
                            });
                    },
                    onClickAddPoint: function(dindex) {
                        var selectedItem = fnObj.grid.gridFirst.list[dindex];
                        var loadURL = '/wallet/management/operator/addPoint?targetOpIdx=' + selectedItem.opIdx;

                        BootstrapDialog.show({
                            draggable: true,
                            title: '<h4>Add point to Operator</h4>',
                            message: $('<div></div>').load(loadURL),
                            buttons: [{
                                icon: 'fa fa-plus',
                                label: 'Confirm',
                                cssClass: 'btn-primary',
                                action: function(dialog) {
                                    this.spin();
                                    dialog.setClosable(false);
                                    dialog.enableButtons(false);
                                    fnObj.grid.dialogObjectRef = dialog;
                                    fnObj.grid.dialogButtonRef = this;
                                    modalObj.requestServer(dialog, fnObj.grid.onCallbackAddPoint);
                                }
                            }, {
                                icon: 'fa fa-times',
                                label: 'Cancel',
                                cssClass: 'btn-danger',
                                action: function(dialog) {
                                    dialog.close();
                                }
                            }],
                            onshown: function() {
                                if (mcjsUtils.isMobileDevice() == false) {
                                    var inputObject = document.getElementById("txt_m_transfer_amount");
                                    if (inputObject) {
                                        inputObject.focus();
                                    }
                                }
                            }
                        });
                    },
                    onCallbackAddPoint: function(result, refreshData) {
                        if (fnObj.grid.dialogObjectRef) {
                            fnObj.grid.dialogButtonRef.stopSpin();
                            fnObj.grid.dialogObjectRef.enableButtons(true);
                            fnObj.grid.dialogObjectRef.setClosable(true);
                        }
                        if (true === refreshData) {
                            fnObj.grid.firstGridSearch();
                            fnObj.grid.refreshLoginOperatorPoint();
                        }
                    },
                    onCallbackSubtractPoint: function(result, refreshData) {
                        if (fnObj.grid.dialogObjectRef) {
                            fnObj.grid.dialogButtonRef.stopSpin();
                            fnObj.grid.dialogObjectRef.enableButtons(true);
                            fnObj.grid.dialogObjectRef.setClosable(true);
                        }
                        if (true === refreshData) {
                            fnObj.grid.firstGridSearch();
                            fnObj.grid.refreshLoginOperatorPoint();
                        }
                    },
                    refreshLoginOperatorPoint: function() {
                        if (g_tilesHeaderModalObj)
                            g_tilesHeaderModalObj.requestCurrentOperatorPoint();
                        else
                            console.log('g_tilesHeaderModalObj not defined');
                    },
                    onClickSubtractPoint: function(dindex) {
                        var selectedItem = fnObj.grid.gridFirst.list[dindex];
                        var loadURL = '/wallet/management/operator/subtractPoint?targetOpIdx=' + selectedItem.opIdx;

                        BootstrapDialog.show({
                            draggable: true,
                            title: '<h4>Subtract point from Operator</h4>',
                            message: $('<div></div>').load(loadURL),
                            buttons: [{
                                icon: 'fa fa-minus',
                                label: 'Confirm',
                                cssClass: 'btn-primary',
                                action: function(dialog) {
                                    this.spin();
                                    dialog.setClosable(false);
                                    dialog.enableButtons(false);
                                    fnObj.grid.dialogObjectRef = dialog;
                                    fnObj.grid.dialogButtonRef = this;
                                    modalObj.requestServer(dialog, fnObj.grid.onCallbackSubtractPoint);
                                }
                            }, {
                                icon: 'fa fa-times',
                                label: 'Cancel',
                                cssClass: 'btn-danger',
                                action: function(dialog) {
                                    dialog.close();
                                }
                            }],
                            onshown: function() {
                                if (mcjsUtils.isMobileDevice() == false) {
                                    var inputObject = document.getElementById("txt_m_transfer_amount");
                                    if (inputObject) {
                                        inputObject.focus();
                                    }
                                }
                            }
                        });
                    },
                    onClickAddChildOperator: function(item) {
                        var loadURL = '/wallet/management/operator/createChildOperator?targetOpIdx=' + item.opIdx;
                        var text = 'New Child to: ' + item.opId;

                        BootstrapDialog.show({
                            draggable: true,
                            size: BootstrapDialog.SIZE_WIDE,
                            title: '<h4>' + text + '</h4>',
                            message: $('<div></div>').load(loadURL),
                            buttons: [{
                                label: 'Confirm',
                                cssClass: 'btn-primary',
                                action: function(dialog) {
                                    modalObj.requestServer(dialog, fnObj.grid.firstGridSearch);
                                }
                            }, {
                                label: 'Cancel',
                                cssClass: 'btn-danger',
                                action: function(dialog) {
                                    dialog.close();
                                }
                            }]
                        });
                    },
                    onClickAddRootOperator: function() {
                        var loadURL = '/wallet/management/operator/createChildOperator';
                        var text = 'New Operator on Top';

                        BootstrapDialog.show({
                            draggable: true,
                            size: BootstrapDialog.SIZE_WIDE,
                            title: '<h4>' + text + '</h4>',
                            message: $('<div></div>').load(loadURL),
                            buttons: [{
                                label: 'Confirm',
                                cssClass: 'btn-primary',
                                action: function(dialog) {
                                    modalObj.requestServer(dialog, fnObj.grid.firstGridSearch);
                                }
                            }, {
                                label: 'Cancel',
                                cssClass: 'btn-danger',
                                action: function(dialog) {
                                    dialog.close();
                                }
                            }]
                        });
                    },
                    toExcel: function(gridIndex) {
                        switch (gridIndex) {
                            case 1:
                                fnObj.grid.gridFirst.exportExcel("opData.xls");
                                break;
                        }
                    }
                }
            };
        </script>
    </div>
    <!-- End Page -->
    <!-- Footer -->
    <footer class="site-footer">

        <span class="site-footer-legal">© COPYRIGHT Ximax 2016, ALL RIGHTS RESERVED.</span>

        <div class="site-footer-right">
            <a href="#">Ximax</a>
        </div>
    </footer>
    <script src="/wallet/resources/compiled/compiled_layout.js?v=2018081601"></script>
    <script>
        $(document).ready(function() {
            if (typeof fnObj != 'undefined') {
                fnObj.init();
            }
            Site.run();
            var requestPath = window.location.pathname;
            if (requestPath) {
                $('.site-menu').find('a.animsition-link').each(function() {
                    if (requestPath.indexOf($(this).attr('href')) !== -1) {
                        var activeMenu = $(this).parent();
                        activeMenu.addClass('active');
                        activeMenu.parents("li").each(function() {
                            $(this).addClass("open");
                        });
                        return false;
                    }
                });
            }
        });
    </script>
</body>

</html>